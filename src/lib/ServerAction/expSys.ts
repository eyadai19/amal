export async function ChatbotExpAction(
	question: string,
	answer: string,
): Promise<
	| { question: string; answers: string[] }
	| { field: string; message: string }
	| { answer: string }
> {
	"use server";
	try {
		// ========== البداية: السؤال الرئيسي ==========
		if (question == "") {
			return {
				question: "ما هو الهدف؟",
				answers: ["فئة الوثائق", "فئة الحقوق"],
			};
		}

		// ========== فئة الوثائق ==========
		if (question === "ما هو الهدف؟" && answer === "فئة الوثائق") {
			return {
				question: "اختر نوع الخدمة الوثائقية:",
				answers: [
					"الحدد في السكن",
					"الحدد في استعادة الوثائق",
					"وثائق التوظيف",
					"وثائق التعليم والتدريب",
					"وثائق الإفراج",
					"الوثائق الأساسية",
					"إزالة القيود الأمنية",
				],
			};
		}

		// --- مسار السكن ---
		if (
			question === "اختر نوع الخدمة الوثائقية:" &&
			answer === "الحدد في السكن"
		) {
			return {
				answer: "أي شكل جوار المفروضة من سكنه بسبب سطح طالب (لا يمكن قصاصاً)",
			};
		}

		// --- مسار استعادة الوثائق ---
		if (
			question === "اختر نوع الخدمة الوثائقية:" &&
			answer === "الحدد في استعادة الوثائق"
		) {
			return {
				question: "في الوثائق قد تتطلب موافقة أمنية؟",
				answers: ["نعم (مثل جوار العمل)", "لا"],
			};
		}

		if (question === "في الوثائق قد تتطلب موافقة أمنية؟") {
			return {
				answer:
					answer === "نعم (مثل جوار العمل)"
						? "إجراءات الموافقة الأمنية تستغرق 5 أيام عمل"
						: "يمكنك استكمال الإجراءات فوراً",
			};
		}

		// --- مسار التوظيف ---
		if (
			question === "اختر نوع الخدمة الوثائقية:" &&
			answer === "وثائق التوظيف"
		) {
			return {
				question: "اختر وثيقة التوظيف:",
				answers: [
					"إجمال التعبير ضد المفروضة في التوظيف (المادة 1، حتى تابع العمل المستحقة)",
					"استئنافات",
					"التوظيف الأطفال أو تستكرة التطلب ملفاظاً على محاسبة؟",
				],
			};
		}

		if (question === "اختر وثيقة التوظيف:" && answer.includes("المادة 1")) {
			return {
				answer:
					"تقديم الاستئناف:\n1. تعبئة النموذج الرسمي\n2. إرفاق المستندات\n3. دفع الرسوم (200 ريال)",
			};
		}

		// --- مسار التعليم والتدريب ---
		if (
			question === "اختر نوع الخدمة الوثائقية:" &&
			answer === "وثائق التعليم والتدريب"
		) {
			return {
				question: "اختر وثيقة التعليم:",
				answers: [
					"تسمح بالتحسين في المرأة التنظيمية الحكومية في فوق زيادة ما هي المحلية",
					"أمكن التقديم على فروض صغيرة مع الخطوط الصوت للتنمية بموجزة محددة",
				],
			};
		}

		if (question === "اختر وثيقة التعليم:" && answer.includes("التحسين")) {
			return {
				answer:
					"شروط التحسين:\n1. أن يكون المتقدم سعودي الجنسية\n2. ألا يقل العمر عن 21 سنة",
			};
		}

		// --- مسار الوثائق الأساسية ---
		if (
			question === "اختر نوع الخدمة الوثائقية:" &&
			answer === "الوثائق الأساسية"
		) {
			return {
				question: "اختر الوثيقة الأساسية:",
				answers: [
					"الهوية الوطنية",
					"رخصة القيادة",
					"جواز السفر",
					"وثائق العمل",
				],
			};
		}

		if (question === "اختر الوثيقة الأساسية:" && answer === "وثائق العمل") {
			return {
				question: "هل تحتاج موافقة أمنية؟",
				answers: ["نعم (مثل جواز العمل)", "لا"],
			};
		}

		if (question === "هل تحتاج موافقة أمنية؟") {
			return {
				answer:
					answer === "نعم (مثل جواز العمل)"
						? "يجب تقديم طلب موافقة أمنية أولاً"
						: "يمكنك استخراج الوثيقة مباشرة",
			};
		}

		// --- مسار إزالة القيود الأمنية ---
		if (
			question === "اختر نوع الخدمة الوثائقية:" &&
			answer === "إزالة القيود الأمنية"
		) {
			return {
				question: "اختر نوع القيد:",
				answers: ["قيود سفر", "قيود توظيف", "قيود مالية"],
			};
		}

		if (question === "اختر نوع القيد:") {
			return {
				answer: `إجراءات إزالة ${answer}:\n1. تقديم طلب رسمي\n2. مقابلة أمنية\n3. انتظار الموافقة النهائية`,
			};
		}

		// ========== فئة الحقوق ==========
		if (question === "ما هو الهدف؟" && answer === "فئة الحقوق") {
			return {
				question: "اختر نوع الحق:",
				answers: [
					"حقوق السكن",
					"حقوق التوظيف",
					"حقوق التعليم والتدريب",
					"الحق في الجماعة من التعبير",
					"الحق في الحماية من التمييز",
					"حقوق الدعم المالي",
				],
			};
		}

		// --- حقوق السكن ---
		if (question === "اختر نوع الحق:" && answer === "حقوق السكن") {
			return {
				answer: "أي شكل جوار المفروضة من سكنه بسبب سطح طالب (لا يمكن قصاصاً)",
			};
		}

		// --- حقوق التوظيف ---
		if (question === "اختر نوع الحق:" && answer === "حقوق التوظيف") {
			return {
				question: "اختر حق التوظيف:",
				answers: [
					"إجمال التعبير ضد المفروضة في التوظيف (المادة 1، حتى تابع العمل المستحقة)",
					"استئنافات",
					"التوظيف الأطفال أو تستكرة التطلب ملفاظاً على محاسبة؟",
				],
			};
		}

		// --- حقوق التعليم والتدريب ---
		if (question === "اختر نوع الحق:" && answer === "حقوق التعليم والتدريب") {
			return {
				question: "اختر حق التعليم:",
				answers: [
					"تسمح بالتحسين في المرأة التنظيمية الحكومية في فوق زيادة ما هي المحلية",
					"أمكن التقديم على فروض صغيرة مع الخطوط الصوت للتنمية بموجزة محددة",
				],
			};
		}

		// --- الحق في الجماعة من التعبير ---
		if (
			question === "اختر نوع الحق:" &&
			answer === "الحق في الجماعة من التعبير"
		) {
			return {
				answer:
					"أمكن رفع جميع خطابة عند التطوير للتعبير (المادة 2، حتى تابع العمل المستحقة) من الطبيات",
			};
		}

		// --- الحق في الحماية من التمييز ---
		if (
			question === "اختر نوع الحق:" &&
			answer === "الحق في الحماية من التمييز"
		) {
			return {
				question: "اختر نوع التمييز:",
				answers: [
					"تمييز على أساس الجنس",
					"تمييز على أساس الإعاقة",
					"تمييز على أساس العرق أو اللون",
				],
			};
		}

		if (question === "اختر نوع التمييز:") {
			return {
				answer: `إجراءات التبليغ عن ${answer}:\n1. تقديم بلاغ رسمي\n2. إرفاق الأدلة\n3. المتابعة عبر منصة حقوق الإنسان`,
			};
		}

		// --- حقوق الدعم المالي ---
		if (question === "اختر نوع الحق:" && answer === "حقوق الدعم المالي") {
			return {
				question: "اختر نوع الدعم:",
				answers: ["دعم تعليمي", "دعم ريادي", "منح أسر منتجة"],
			};
		}

		if (question === "اختر نوع الدعم:") {
			return {
				answer: `متطلبات ${answer}:\n1. صورة من السجل التجاري\n2. كشف حساب بنكي\n3. دراسة الجدوى`,
			};
		}

		// === معالجة الأخطاء ===
		return {
			field: "error",
			message: "إدخال غير صحيح. يرجى اختيار أحد الخيارات المعروضة.",
		};
	} catch (error) {
		return {
			field: "error",
			message: "حدث خطأ في النظام. يرجى المحاولة لاحقاً.",
		};
	}
}
